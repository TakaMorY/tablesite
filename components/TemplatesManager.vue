<template>
    <div class="max-w-7xl mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">–®–∞–±–ª–æ–Ω—ã –∑–∞–º–µ—Ç–æ–∫</h1>
            <p class="text-gray-600 dark:text-gray-400">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫</p>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤ -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            <div v-for="template in templates" :key="template.id"
                class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700 hover:shadow-xl transition-all duration-300 cursor-pointer group"
                @click="applyTemplate(template)">
                <div class="flex items-center justify-between mb-4">
                    <div class="w-10 h-10 rounded-lg flex items-center justify-center" :class="template.color">
                        <svg class="w-5 h-5 text-gray-600 dark:text-gray-400" fill="none" stroke="currentColor"
                            viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                    </div>
                    <span
                        class="text-xs font-medium px-2 py-1 rounded-full bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400">
                        {{ template.category }}
                    </span>
                </div>

                <h3
                    class="text-xl font-semibold text-gray-800 dark:text-white mb-3 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors">
                    {{ template.title }}
                </h3>

                <p class="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2">
                    {{ template.description }}
                </p>

                <div class="flex items-center justify-between">
                    <span class="text-xs text-gray-500 dark:text-gray-400">
                        {{ template.fields.length }} –ø–æ–ª–µ–π
                    </span>
                    <button
                        class="text-purple-500 hover:text-purple-600 font-medium text-sm flex items-center space-x-1">
                        <span>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</span>
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞ -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border border-gray-200 dark:border-gray-700">
            <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4">–°–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —à–∞–±–ª–æ–Ω</h3>
            <div class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
                        </label>
                        <input v-model="newTemplate.title" type="text"
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white"
                            placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–ª–∞–Ω">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                            –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                        </label>
                        <select v-model="newTemplate.category"
                            class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white">
                            <option value="–†–∞–±–æ—Ç–∞">–†–∞–±–æ—Ç–∞</option>
                            <option value="–£—á–µ–±–∞">–£—á–µ–±–∞</option>
                            <option value="–õ–∏—á–Ω–æ–µ">–õ–∏—á–Ω–æ–µ</option>
                            <option value="–ü—Ä–æ–µ–∫—Ç—ã">–ü—Ä–æ–µ–∫—Ç—ã</option>
                            <option value="–î—Ä—É–≥–æ–µ">–î—Ä—É–≥–æ–µ</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        –û–ø–∏—Å–∞–Ω–∏–µ
                    </label>
                    <textarea v-model="newTemplate.description"
                        class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white resize-none"
                        rows="2" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞..."></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–±–ª–æ–Ω–∞
                    </label>
                    <textarea v-model="newTemplate.content"
                        class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-800 dark:text-white resize-none font-mono text-sm"
                        rows="6"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [–ø–æ–ª–µ] –¥–ª—è –∑–∞–º–µ–Ω—è–µ–º—ã—Ö –ø–æ–ª–µ–π."></textarea>
                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">
                        –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä: [–î–∞—Ç–∞], [–ó–∞–¥–∞—á–∞]
                    </p>
                </div>

                <button @click="createTemplate"
                    class="bg-purple-500 hover:bg-purple-600 text-white font-medium py-2 px-6 rounded-lg transition-colors">
                    –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω
                </button>
            </div>
        </div>
    </div>
</template>

<script setup>
const templates = ref([
    {
        id: 1,
        title: '–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–ª–∞–Ω',
        category: '–†–∞–±–æ—Ç–∞',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á –Ω–∞ –¥–µ–Ω—å',
        color: 'bg-yellow-50 dark:bg-yellow-900/20',
        content: `üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –ø–ª–∞–Ω - [–î–∞—Ç–∞]

üéØ –ì–ª–∞–≤–Ω—ã–µ —Ü–µ–ª–∏ –¥–Ω—è:
1. [–¶–µ–ª—å 1]
2. [–¶–µ–ª—å 2]
3. [–¶–µ–ª—å 3]

‚úÖ –ó–∞–¥–∞—á–∏:
- [ ] [–ó–∞–¥–∞—á–∞ 1]
- [ ] [–ó–∞–¥–∞—á–∞ 2]
- [ ] [–ó–∞–¥–∞—á–∞ 3]

üí° –ò–¥–µ–∏ –∏ –∑–∞–º–µ—Ç–∫–∏:
[–í–∞—à–∏ –º—ã—Å–ª–∏]`,
        fields: ['–î–∞—Ç–∞', '–¶–µ–ª—å 1', '–¶–µ–ª—å 2', '–¶–µ–ª—å 3', '–ó–∞–¥–∞—á–∞ 1', '–ó–∞–¥–∞—á–∞ 2', '–ó–∞–¥–∞—á–∞ 3', '–í–∞—à–∏ –º—ã—Å–ª–∏']
    },
    {
        id: 2,
        title: '–í—Å—Ç—Ä–µ—á–∞',
        category: '–†–∞–±–æ—Ç–∞',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ –æ –≤—Å—Ç—Ä–µ—á–µ',
        color: 'bg-blue-50 dark:bg-blue-900/20',
        content: `üë• –í—Å—Ç—Ä–µ—á–∞: [–¢–µ–º–∞]

üìÖ –î–∞—Ç–∞: [–î–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏]
üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: [–£—á–∞—Å—Ç–Ω–∏–∫–∏]

üéØ –ü–æ–≤–µ—Å—Ç–∫–∞:
1. [–ü—É–Ω–∫—Ç 1]
2. [–ü—É–Ω–∫—Ç 2]
3. [–ü—É–Ω–∫—Ç 3]

üìù –û–±—Å—É–∂–¥–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:
‚Ä¢ [–í–æ–ø—Ä–æ—Å 1] - [–†–µ—à–µ–Ω–∏–µ]
‚Ä¢ [–í–æ–ø—Ä–æ—Å 2] - [–†–µ—à–µ–Ω–∏–µ]

‚úÖ –†–µ—à–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è:
- [ ] [–î–µ–π—Å—Ç–≤–∏–µ 1] - [–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π] - [–°—Ä–æ–∫]
- [ ] [–î–µ–π—Å—Ç–≤–∏–µ 2] - [–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π] - [–°—Ä–æ–∫]`,
        fields: ['–¢–µ–º–∞', '–î–∞—Ç–∞ –≤—Å—Ç—Ä–µ—á–∏', '–£—á–∞—Å—Ç–Ω–∏–∫–∏', '–ü—É–Ω–∫—Ç 1', '–ü—É–Ω–∫—Ç 2', '–ü—É–Ω–∫—Ç 3', '–í–æ–ø—Ä–æ—Å 1', '–†–µ—à–µ–Ω–∏–µ', '–í–æ–ø—Ä–æ—Å 2', '–†–µ—à–µ–Ω–∏–µ', '–î–µ–π—Å—Ç–≤–∏–µ 1', '–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π', '–°—Ä–æ–∫', '–î–µ–π—Å—Ç–≤–∏–µ 2', '–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π', '–°—Ä–æ–∫']
    },
    {
        id: 3,
        title: '–ö–æ–Ω—Å–ø–µ–∫—Ç –∫–Ω–∏–≥–∏',
        category: '–£—á–µ–±–∞',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–Ω–∏–≥',
        color: 'bg-green-50 dark:bg-green-900/20',
        content: `üìö –ö–æ–Ω—Å–ø–µ–∫—Ç: "[–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏]"
‚úçÔ∏è –ê–≤—Ç–æ—Ä: [–ê–≤—Ç–æ—Ä]

üåü –û—Å–Ω–æ–≤–Ω—ã–µ –∏–¥–µ–∏:
‚Ä¢ [–ò–¥–µ—è 1]
‚Ä¢ [–ò–¥–µ—è 2]
‚Ä¢ [–ò–¥–µ—è 3]

üí° –ö–ª—é—á–µ–≤—ã–µ —Ü–∏—Ç–∞—Ç—ã:
"[–¶–∏—Ç–∞—Ç–∞ 1]"
"[–¶–∏—Ç–∞—Ç–∞ 2]"

üìù –í—ã–≤–æ–¥—ã –∏ –º—ã—Å–ª–∏:
[–í–∞—à–∏ –º—ã—Å–ª–∏ –æ –∫–Ω–∏–≥–µ]

‚≠ê –û—Ü–µ–Ω–∫–∞: [–û—Ü–µ–Ω–∫–∞]/10`,
        fields: ['–ù–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏', '–ê–≤—Ç–æ—Ä', '–ò–¥–µ—è 1', '–ò–¥–µ—è 2', '–ò–¥–µ—è 3', '–¶–∏—Ç–∞—Ç–∞ 1', '–¶–∏—Ç–∞—Ç–∞ 2', '–í–∞—à–∏ –º—ã—Å–ª–∏ –æ –∫–Ω–∏–≥–µ', '–û—Ü–µ–Ω–∫–∞']
    },
    {
        id: 4,
        title: '–ü–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞',
        category: '–ü—Ä–æ–µ–∫—Ç—ã',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞',
        color: 'bg-purple-50 dark:bg-purple-900/20',
        content: `üöÄ –ü—Ä–æ–µ–∫—Ç: [–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞]

üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞:
[–û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–∏]

üìÖ –°—Ä–æ–∫–∏:
‚Ä¢ –ù–∞—á–∞–ª–æ: [–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞]
‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: [–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è]

üë• –ö–æ–º–∞–Ω–¥–∞:
[–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã]

üìã –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã:
1. [–≠—Ç–∞–ø 1] - [–°—Ä–æ–∫]
2. [–≠—Ç–∞–ø 2] - [–°—Ä–æ–∫]
3. [–≠—Ç–∞–ø 3] - [–°—Ä–æ–∫]

üí∞ –†–µ—Å—É—Ä—Å—ã:
[–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã]

‚ö†Ô∏è –†–∏—Å–∫–∏:
[–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏]`,
        fields: ['–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞', '–û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–∏', '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞', '–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è', '–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã', '–≠—Ç–∞–ø 1', '–°—Ä–æ–∫', '–≠—Ç–∞–ø 2', '–°—Ä–æ–∫', '–≠—Ç–∞–ø 3', '–°—Ä–æ–∫', '–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã', '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏']
    },
    {
        id: 5,
        title: '–õ–∏—á–Ω—ã–µ —Ü–µ–ª–∏',
        category: '–õ–∏—á–Ω–æ–µ',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ª–∏—á–Ω—ã—Ö —Ü–µ–ª–µ–π',
        color: 'bg-pink-50 dark:bg-pink-900/20',
        content: `üéØ –õ–∏—á–Ω—ã–µ —Ü–µ–ª–∏ - [–ü–µ—Ä–∏–æ–¥]

üèÜ –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏:
1. [–¶–µ–ª—å 1] - [–°—Ä–æ–∫]
2. [–¶–µ–ª—å 2] - [–°—Ä–æ–∫]
3. [–¶–µ–ª—å 3] - [–°—Ä–æ–∫]

üìà –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
‚Ä¢ [–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å 1]: [–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ] ‚Üí [–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ]
‚Ä¢ [–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å 2]: [–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ] ‚Üí [–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ]

üõ†Ô∏è –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:
- [ ] [–î–µ–π—Å—Ç–≤–∏–µ 1]
- [ ] [–î–µ–π—Å—Ç–≤–∏–µ 2]
- [ ] [–î–µ–π—Å—Ç–≤–∏–µ 3]

üí≠ –†–µ—Ñ–ª–µ–∫—Å–∏—è:
[–í–∞—à–∏ –º—ã—Å–ª–∏ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è]`,
        fields: ['–ü–µ—Ä–∏–æ–¥', '–¶–µ–ª—å 1', '–°—Ä–æ–∫', '–¶–µ–ª—å 2', '–°—Ä–æ–∫', '–¶–µ–ª—å 3', '–°—Ä–æ–∫', '–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å 1', '–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ', '–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ', '–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å 2', '–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ', '–¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ', '–î–µ–π—Å—Ç–≤–∏–µ 1', '–î–µ–π—Å—Ç–≤–∏–µ 2', '–î–µ–π—Å—Ç–≤–∏–µ 3', '–í–∞—à–∏ –º—ã—Å–ª–∏ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è']
    },
    {
        id: 6,
        title: '–ò–¥–µ–∏ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ',
        category: '–õ–∏—á–Ω–æ–µ',
        description: '–®–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏–¥–µ–π –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è',
        color: 'bg-orange-50 dark:bg-orange-900/20',
        content: `üí° –ò–¥–µ—è: [–ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏]

üìù –û–ø–∏—Å–∞–Ω–∏–µ:
[–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–¥–µ–∏]

üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
‚Ä¢ [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å 1]
‚Ä¢ [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å 2]

üõ†Ô∏è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
[–®–∞–≥–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏]

ü§î –í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è:
[–í–æ–ø—Ä–æ—Å—ã –∏ —Å–æ–º–Ω–µ–Ω–∏—è]

‚≠ê –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç]`,
        fields: ['–ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏', '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–¥–µ–∏', '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å 1', '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å 2', '–®–∞–≥–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏', '–í–æ–ø—Ä–æ—Å—ã –∏ —Å–æ–º–Ω–µ–Ω–∏—è', '–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç']
    }
])

const newTemplate = ref({
    title: '',
    category: '–†–∞–±–æ—Ç–∞',
    description: '',
    content: ''
})

const applyTemplate = (template) => {
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –≤ localStorage
    localStorage.setItem('selectedTemplate', JSON.stringify(template))

    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–º–µ—Ç–æ–∫
    navigateTo('/notes')
}

const createTemplate = () => {
    if (!newTemplate.value.title || !newTemplate.value.content) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–±–ª–æ–Ω–∞')
        return
    }

    const fields = extractFields(newTemplate.value.content)

    const template = {
        id: Date.now(),
        title: newTemplate.value.title,
        category: newTemplate.value.category,
        description: newTemplate.value.description,
        color: 'bg-gray-50 dark:bg-gray-900/20',
        content: newTemplate.value.content,
        fields: fields
    }

    templates.value.push(template)

    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
    newTemplate.value = {
        title: '',
        category: '–†–∞–±–æ—Ç–∞',
        description: '',
        content: ''
    }

    alert('–®–∞–±–ª–æ–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!')
}

const extractFields = (content) => {
    const fieldRegex = /\[(.*?)\]/g
    const fields = []
    let match
    while ((match = fieldRegex.exec(content)) !== null) {
        if (!fields.includes(match[1])) {
            fields.push(match[1])
        }
    }
    return fields
}
</script>

<style scoped>
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}
</style>